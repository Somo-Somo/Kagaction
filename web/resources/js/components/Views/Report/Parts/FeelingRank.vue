<template>
    <g id="Feeling Rank">
        <path
            id="Feeling"
            d="M680.098 426H686.542V415.776H695.686V410.412H686.542V404.544H697.198V399.18H680.098V426ZM709.589 426.504C711.965 426.504 714.773 425.676 716.897 424.164L714.773 420.312C713.297 421.176 711.929 421.608 710.453 421.608C707.861 421.608 705.917 420.456 705.341 417.648H717.365C717.509 417.144 717.653 416.028 717.653 414.876C717.653 409.296 714.773 405.012 708.869 405.012C703.937 405.012 699.149 409.116 699.149 415.74C699.149 422.544 703.685 426.504 709.589 426.504ZM705.233 413.436C705.665 411.024 707.213 409.908 708.977 409.908C711.317 409.908 712.217 411.42 712.217 413.436H705.233ZM731.034 426.504C733.41 426.504 736.218 425.676 738.342 424.164L736.218 420.312C734.742 421.176 733.374 421.608 731.898 421.608C729.306 421.608 727.362 420.456 726.786 417.648H738.81C738.954 417.144 739.098 416.028 739.098 414.876C739.098 409.296 736.218 405.012 730.314 405.012C725.382 405.012 720.594 409.116 720.594 415.74C720.594 422.544 725.13 426.504 731.034 426.504ZM726.678 413.436C727.11 411.024 728.658 409.908 730.422 409.908C732.762 409.908 733.662 411.42 733.662 413.436H726.678ZM749.024 426.504C750.464 426.504 751.508 426.252 752.192 425.964L751.436 421.248C751.076 421.32 750.932 421.32 750.716 421.32C750.212 421.32 749.6 420.924 749.6 419.556V397.236H743.192V419.34C743.192 423.624 744.632 426.504 749.024 426.504ZM755.145 426H761.553V405.516H755.145V426ZM758.349 402.672C760.473 402.672 761.913 401.376 761.913 399.36C761.913 397.38 760.473 396.084 758.349 396.084C756.189 396.084 754.785 397.38 754.785 399.36C754.785 401.376 756.189 402.672 758.349 402.672ZM766.711 426H773.119V412.32C774.343 411.132 775.207 410.484 776.647 410.484C778.267 410.484 779.023 411.276 779.023 414.12V426H785.431V413.328C785.431 408.216 783.523 405.012 779.059 405.012C776.287 405.012 774.199 406.416 772.507 408.072H772.399L771.931 405.516H766.711V426ZM797.75 434.604C804.878 434.604 809.378 431.544 809.378 427.224C809.378 423.516 806.498 421.968 801.458 421.968H798.218C796.022 421.968 795.194 421.536 795.194 420.6C795.194 419.88 795.41 419.592 795.842 419.16C796.742 419.412 797.57 419.52 798.254 419.52C802.79 419.52 806.426 417.432 806.426 412.644C806.426 411.672 806.174 410.736 805.886 410.16H809.018V405.516H801.494C800.558 405.192 799.442 405.012 798.254 405.012C793.826 405.012 789.686 407.46 789.686 412.428C789.686 414.84 791.018 416.748 792.494 417.756V417.9C791.126 418.836 790.19 420.276 790.19 421.716C790.19 423.444 790.982 424.524 792.062 425.244V425.424C790.154 426.396 789.182 427.764 789.182 429.456C789.182 433.128 793.034 434.604 797.75 434.604ZM798.254 415.668C796.778 415.668 795.662 414.588 795.662 412.428C795.662 410.376 796.778 409.296 798.254 409.296C799.766 409.296 800.882 410.376 800.882 412.428C800.882 414.588 799.766 415.668 798.254 415.668ZM798.758 430.608C796.166 430.608 794.438 429.888 794.438 428.448C794.438 427.764 794.726 427.188 795.374 426.612C796.022 426.792 796.814 426.864 798.29 426.864H800.234C802.142 426.864 803.222 427.116 803.222 428.34C803.222 429.636 801.386 430.608 798.758 430.608Z"
            fill="#91C5BE"
        />
        <g id="Upper">
            <g id="first" v-if="rankTable.length > 0">
                <text
                    id="1st:"
                    fill="#91C5BE"
                    xml:space="preserve"
                    style="white-space: pre"
                    font-family="Noto Sans JP"
                    font-size="24"
                    font-weight="bold"
                    letter-spacing="0em"
                    ><tspan x="681.832" y="486.464">{{
                        rankTable[0].rank
                    }}</tspan></text
                >
                <text
                    id="40%"
                    fill="#91C5BE"
                    xml:space="preserve"
                    style="white-space: pre"
                    font-family="Noto Sans JP"
                    font-size="20"
                    font-weight="bold"
                    letter-spacing="0em"
                    ><tspan x="812.789" y="485.464"
                        >{{ rankTable[0].percent }} %</tspan
                    ></text
                >
                <g id="twemoji:frowning-face" clip-path="url(#clip0_140_4)">
                    <path
                        id="Vector"
                        d="M798 475C798 490.464 785.464 503 770 503C754.538 503 742 490.464 742 475C742 459.538 754.538 447 770 447C785.464 447 798 459.538 798 475Z"
                        fill="#FFCC4D"
                    />
                    <path
                        id="Vector_2"
                        d="M759.889 475C762.037 475 763.778 472.562 763.778 469.556C763.778 466.549 762.037 464.111 759.889 464.111C757.741 464.111 756 466.549 756 469.556C756 472.562 757.741 475 759.889 475Z"
                        fill="#664500"
                    />
                    <path
                        id="Vector_3"
                        d="M780.111 475C782.259 475 784 472.562 784 469.556C784 466.549 782.259 464.111 780.111 464.111C777.963 464.111 776.222 466.549 776.222 469.556C776.222 472.562 777.963 475 780.111 475Z"
                        fill="#664500"
                    />
                    <path
                        id="Vector_4"
                        d="M755.479 490.355C755.613 490.475 755.785 490.546 755.965 490.554C756.145 490.562 756.322 490.508 756.467 490.4C756.527 490.355 762.568 485.889 770 485.889C777.414 485.889 783.474 490.355 783.533 490.4C783.678 490.508 783.855 490.563 784.035 490.555C784.215 490.547 784.387 490.476 784.521 490.356C784.655 490.235 784.743 490.071 784.769 489.893C784.796 489.715 784.76 489.533 784.667 489.378C784.467 489.045 779.663 481.222 770 481.222C760.337 481.222 755.532 489.044 755.333 489.378C755.24 489.532 755.204 489.714 755.23 489.893C755.257 490.071 755.345 490.234 755.479 490.355V490.355Z"
                        fill="#664500"
                    />
                </g>
            </g>
            <g id="second" v-if="rankTable.length > 1">
                <text
                    id="2nd:"
                    fill="#91C5BE"
                    xml:space="preserve"
                    style="white-space: pre"
                    font-family="Noto Sans JP"
                    font-size="24"
                    font-weight="bold"
                    letter-spacing="0em"
                    ><tspan x="901.109" y="486.464">{{
                        rankTable[1].rank
                    }}</tspan></text
                >
                <text
                    id="40%_2"
                    fill="#91C5BE"
                    xml:space="preserve"
                    style="white-space: pre"
                    font-family="Noto Sans JP"
                    font-size="20"
                    font-weight="bold"
                    letter-spacing="0em"
                    ><tspan x="1036.79" y="485.464"
                        >{{ rankTable[1].percent }} %</tspan
                    ></text
                >
                <g id="twemoji:frowning-face_2" clip-path="url(#clip1_140_4)">
                    <path
                        id="Vector_5"
                        d="M1022 475C1022 490.464 1009.46 503 994 503C978.538 503 966 490.464 966 475C966 459.538 978.538 447 994 447C1009.46 447 1022 459.538 1022 475Z"
                        fill="#FFCC4D"
                    />
                    <path
                        id="Vector_6"
                        d="M983.889 475C986.037 475 987.778 472.562 987.778 469.556C987.778 466.549 986.037 464.111 983.889 464.111C981.741 464.111 980 466.549 980 469.556C980 472.562 981.741 475 983.889 475Z"
                        fill="#664500"
                    />
                    <path
                        id="Vector_7"
                        d="M1004.11 475C1006.26 475 1008 472.562 1008 469.556C1008 466.549 1006.26 464.111 1004.11 464.111C1001.96 464.111 1000.22 466.549 1000.22 469.556C1000.22 472.562 1001.96 475 1004.11 475Z"
                        fill="#664500"
                    />
                    <path
                        id="Vector_8"
                        d="M979.479 490.355C979.613 490.475 979.785 490.546 979.965 490.554C980.145 490.562 980.322 490.508 980.467 490.4C980.527 490.355 986.568 485.889 994 485.889C1001.41 485.889 1007.47 490.355 1007.53 490.4C1007.68 490.508 1007.85 490.563 1008.04 490.555C1008.22 490.547 1008.39 490.476 1008.52 490.356C1008.65 490.235 1008.74 490.071 1008.77 489.893C1008.8 489.715 1008.76 489.533 1008.67 489.378C1008.47 489.045 1003.66 481.222 994 481.222C984.337 481.222 979.532 489.044 979.333 489.378C979.24 489.532 979.204 489.714 979.23 489.893C979.257 490.071 979.345 490.234 979.479 490.355V490.355Z"
                        fill="#664500"
                    />
                </g>
            </g>
        </g>
        <g id="Middle">
            <g id="third" v-if="rankTable.length > 2">
                <text
                    id="3rd:"
                    fill="#91C5BE"
                    xml:space="preserve"
                    style="white-space: pre"
                    font-family="Noto Sans JP"
                    font-size="24"
                    font-weight="bold"
                    letter-spacing="0em"
                    ><tspan x="679.758" y="570.464">{{
                        rankTable[2].rank
                    }}</tspan></text
                >
                <text
                    id="40%_3"
                    fill="#91C5BE"
                    xml:space="preserve"
                    style="white-space: pre"
                    font-family="Noto Sans JP"
                    font-size="20"
                    font-weight="bold"
                    letter-spacing="0em"
                    ><tspan x="812.789" y="569.464"
                        >{{ rankTable[2].percent }} %</tspan
                    ></text
                >
                <g id="twemoji:frowning-face_3" clip-path="url(#clip2_140_4)">
                    <path
                        id="Vector_9"
                        d="M798 559C798 574.464 785.464 587 770 587C754.538 587 742 574.464 742 559C742 543.538 754.538 531 770 531C785.464 531 798 543.538 798 559Z"
                        fill="#FFCC4D"
                    />
                    <path
                        id="Vector_10"
                        d="M759.889 559C762.037 559 763.778 556.563 763.778 553.556C763.778 550.549 762.037 548.111 759.889 548.111C757.741 548.111 756 550.549 756 553.556C756 556.563 757.741 559 759.889 559Z"
                        fill="#664500"
                    />
                    <path
                        id="Vector_11"
                        d="M780.111 559C782.259 559 784 556.563 784 553.556C784 550.549 782.259 548.111 780.111 548.111C777.963 548.111 776.222 550.549 776.222 553.556C776.222 556.563 777.963 559 780.111 559Z"
                        fill="#664500"
                    />
                    <path
                        id="Vector_12"
                        d="M755.479 574.355C755.613 574.475 755.785 574.546 755.965 574.554C756.145 574.562 756.322 574.508 756.467 574.4C756.527 574.355 762.568 569.889 770 569.889C777.414 569.889 783.474 574.355 783.533 574.4C783.678 574.508 783.855 574.563 784.035 574.555C784.215 574.547 784.387 574.476 784.521 574.356C784.655 574.235 784.743 574.071 784.769 573.893C784.796 573.715 784.76 573.533 784.667 573.378C784.467 573.045 779.663 565.222 770 565.222C760.337 565.222 755.532 573.044 755.333 573.378C755.24 573.532 755.204 573.714 755.23 573.893C755.257 574.071 755.345 574.234 755.479 574.355V574.355Z"
                        fill="#664500"
                    />
                </g>
            </g>
            <g id="fourth" v-if="rankTable.length > 3">
                <text
                    id="4th:"
                    fill="#91C5BE"
                    xml:space="preserve"
                    style="white-space: pre"
                    font-family="Noto Sans JP"
                    font-size="24"
                    font-weight="bold"
                    letter-spacing="0em"
                    ><tspan x="903.793" y="570.464">{{
                        rankTable[3].rank
                    }}</tspan></text
                >
                <text
                    id="40%_4"
                    fill="#91C5BE"
                    xml:space="preserve"
                    style="white-space: pre"
                    font-family="Noto Sans JP"
                    font-size="20"
                    font-weight="bold"
                    letter-spacing="0em"
                    ><tspan x="1036.79" y="569.464"
                        >{{ rankTable[3].percent }} %</tspan
                    ></text
                >
                <g id="twemoji:frowning-face_4" clip-path="url(#clip3_140_4)">
                    <path
                        id="Vector_13"
                        d="M1022 559C1022 574.464 1009.46 587 994 587C978.538 587 966 574.464 966 559C966 543.538 978.538 531 994 531C1009.46 531 1022 543.538 1022 559Z"
                        fill="#FFCC4D"
                    />
                    <path
                        id="Vector_14"
                        d="M983.889 559C986.037 559 987.778 556.563 987.778 553.556C987.778 550.549 986.037 548.111 983.889 548.111C981.741 548.111 980 550.549 980 553.556C980 556.563 981.741 559 983.889 559Z"
                        fill="#664500"
                    />
                    <path
                        id="Vector_15"
                        d="M1004.11 559C1006.26 559 1008 556.563 1008 553.556C1008 550.549 1006.26 548.111 1004.11 548.111C1001.96 548.111 1000.22 550.549 1000.22 553.556C1000.22 556.563 1001.96 559 1004.11 559Z"
                        fill="#664500"
                    />
                    <path
                        id="Vector_16"
                        d="M979.479 574.355C979.613 574.475 979.785 574.546 979.965 574.554C980.145 574.562 980.322 574.508 980.467 574.4C980.527 574.355 986.568 569.889 994 569.889C1001.41 569.889 1007.47 574.355 1007.53 574.4C1007.68 574.508 1007.85 574.563 1008.04 574.555C1008.22 574.547 1008.39 574.476 1008.52 574.356C1008.65 574.235 1008.74 574.071 1008.77 573.893C1008.8 573.715 1008.76 573.533 1008.67 573.378C1008.47 573.045 1003.66 565.222 994 565.222C984.337 565.222 979.532 573.044 979.333 573.378C979.24 573.532 979.204 573.714 979.23 573.893C979.257 574.071 979.345 574.234 979.479 574.355V574.355Z"
                        fill="#664500"
                    />
                </g>
            </g>
        </g>
        <g id="Bottom">
            <g id="fifth" v-if="rankTable.length > 4">
                <text
                    id="5th:"
                    fill="#91C5BE"
                    xml:space="preserve"
                    style="white-space: pre"
                    font-family="Noto Sans JP"
                    font-size="24"
                    font-weight="bold"
                    letter-spacing="0em"
                    ><tspan x="679.793" y="654.464">{{
                        rankTable[4].rank
                    }}</tspan></text
                >
                <text
                    id="40%_5"
                    fill="#91C5BE"
                    xml:space="preserve"
                    style="white-space: pre"
                    font-family="Noto Sans JP"
                    font-size="20"
                    font-weight="bold"
                    letter-spacing="0em"
                    ><tspan x="812.789" y="653.464"
                        >{{ rankTable[4].percent }} %</tspan
                    ></text
                >
                <g id="twemoji:frowning-face_5" clip-path="url(#clip4_140_4)">
                    <path
                        id="Vector_17"
                        d="M798 643C798 658.464 785.464 671 770 671C754.538 671 742 658.464 742 643C742 627.538 754.538 615 770 615C785.464 615 798 627.538 798 643Z"
                        fill="#FFCC4D"
                    />
                    <path
                        id="Vector_18"
                        d="M759.889 643C762.037 643 763.778 640.563 763.778 637.556C763.778 634.549 762.037 632.111 759.889 632.111C757.741 632.111 756 634.549 756 637.556C756 640.563 757.741 643 759.889 643Z"
                        fill="#664500"
                    />
                    <path
                        id="Vector_19"
                        d="M780.111 643C782.259 643 784 640.563 784 637.556C784 634.549 782.259 632.111 780.111 632.111C777.963 632.111 776.222 634.549 776.222 637.556C776.222 640.563 777.963 643 780.111 643Z"
                        fill="#664500"
                    />
                    <path
                        id="Vector_20"
                        d="M755.479 658.355C755.613 658.475 755.785 658.546 755.965 658.554C756.145 658.562 756.322 658.508 756.467 658.4C756.527 658.355 762.568 653.889 770 653.889C777.414 653.889 783.474 658.355 783.533 658.4C783.678 658.508 783.855 658.563 784.035 658.555C784.215 658.547 784.387 658.476 784.521 658.356C784.655 658.235 784.743 658.071 784.769 657.893C784.796 657.715 784.76 657.533 784.667 657.378C784.467 657.045 779.663 649.222 770 649.222C760.337 649.222 755.532 657.044 755.333 657.378C755.24 657.532 755.204 657.714 755.23 657.893C755.257 658.071 755.345 658.234 755.479 658.355V658.355Z"
                        fill="#664500"
                    />
                </g>
            </g>
        </g>
    </g>
</template>

<script>
export default {
    data: () => ({
        rankTable: [],
    }),
    props: {
        feeling: {
            type: Object,
        },
    },
    computed: {},
    methods: {
        sortFeeling() {
            return this.feeling.type.sort(function (a, b) {
                if (a.num > b.num) return -1;
                if (a.num < b.num) return 1;
            });
        },
        putRank(sortFeeling) {
            let rank = 1;
            let rank_string = "";
            const limit = sortFeeling.length > 5 ? 5 : sortFeeling.length;
            for (let i = 0; i < limit; i++) {
                if (i === 0) {
                    rank_string = "1st:";
                } else {
                    rank =
                        sortFeeling[i].num === sortFeeling[i - 1].num
                            ? rank
                            : i + 1;
                    if (rank === 1) {
                        rank_string = rank + "st:";
                    } else if (rank === 2) {
                        rank_string = rank + "nd:";
                    } else if (rank === 3) {
                        rank_string = rank + "rd:";
                    } else {
                        rank_string = rank + "th:";
                    }
                }
                this.rankTable.push({
                    rank: rank_string,
                    percent: Math.round(
                        (sortFeeling[i].num / this.feeling.total) * 100
                    ),
                });
            }
        },
    },
    mounted() {
        const sortFeeling = this.sortFeeling();
        console.info(sortFeeling);
        this.putRank(sortFeeling);
    },
};
</script>
